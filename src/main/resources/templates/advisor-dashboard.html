<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::body}, 'Advisor Dashboard')}">
<body>

    <div class="container mt-4">
        <h2 th:text="'Welcome, ' + ${advisor.fullName}">Advisor Name</h2>

        <div class="row text-center my-4">
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Matches</h5>
                        <p class="display-6" th:text="${matchCount}">0</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Projects</h5>
                        <p class="display-6" th:text="${projectCount}">0</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Unassigned</h5>
                        <p class="display-6" th:text="${availableProjectCount}">0</p>
                    </div>
                </div>
            </div>
        </div>

		<h4 class="mt-4">Matches Assigned to You</h4>
		<table class="table table-striped">
			<thead>
				<tr>
					<th>Student</th>
					<th>Score</th>
					<th>Status</th>
					<th>Date</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="match : ${matches}">
					<td th:text="${match.student.fullName}">Student Name</td>
					<td th:text="${match.compatibilityScore}">0.00</td>
					<td th:text="${match.status}">PENDING</td>
                                        <td th:text="${#temporals.format(match.createdAt, 'dd/MM/yyyy')}">date</td>
					<td>
						<form th:action="@{/match/decision}" method="post"
							style="display: inline;">
							<input type="hidden" name="matchId" th:value="${match.id}" /> <input
								type="hidden" name="action" value="ACCEPTED" />
							<button type="submit" class="btn btn-success btn-sm"
								th:disabled="${match.status != 'PENDING'}">Accept</button>
						</form>
						<form th:action="@{/match/decision}" method="post"
							style="display: inline;">
							<input type="hidden" name="matchId" th:value="${match.id}" /> <input
								type="hidden" name="action" value="REJECTED" />
							<button type="submit" class="btn btn-danger btn-sm"
								th:disabled="${match.status != 'PENDING'}">Reject</button>
						</form>
					</td>

				</tr>
			</tbody>
		</table>
		<h4 class="mt-5">Projects Assigned</h4>
		<table class="table table-hover">
			<thead>
				<tr>
					<th>Title</th>
					<th>Student</th>
					<th>Status</th>
					<th>Start Date</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="project : ${projects}">
					<td th:text="${project.title}">Project Title</td>
					<td th:text="${project.student.fullName}">Student</td>
					<td th:text="${project.status}">IN_PROGRESS</td>
                                        <td th:text="${#temporals.format(project.startDate, 'dd/MM/yyyy')}">2025-06-28</td>
				</tr>
			</tbody>
		</table>
		<h4 class="mt-5">Unassigned Projects from Matched Students</h4>
		<table class="table">
			<thead>
				<tr>
					<th>Student</th>
					<th>Title</th>
					<th>Description</th>
					<th>Action</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="project : ${availableProjects}">
					<td th:text="${project.student.fullName}">Student Name</td>
					<td th:text="${project.title}">Title</td>
					<td th:text="${project.description}">Description</td>
					<td>
						<form th:action="@{/project/assign}" method="post"
							style="display: inline;">
							<input type="hidden" name="projectId" th:value="${project.id}" />
							<button type="submit" class="btn btn-sm btn-success">Accept</button>
						</form>
						<form th:action="@{/project/reject}" method="post"
							style="display: inline;">
							<input type="hidden" name="projectId" th:value="${project.id}" />
							<button type="submit" class="btn btn-sm btn-danger">Reject</button>
						</form>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</body>
</html>
